<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="./assets/database.css">

    <title>Base de données</title>
</head>

<body>

    <div class="card-content" id="database-content"></div>

</body>

<script>
    var database = {
        content: document.querySelector('#database-content')
    }

    fetch('data.json').then(function(response) {
    // Chargement de données...
    
    response.text().then(function(text) {
        var data = JSON.parse(text);

        Object.values(data.Entites).forEach(entite => {
            createCard(entite); });
        
    });

    function createCard(entite) {
        const cardBox = document.createElement('div');
        cardBox.classList.add('card');
        database.content.appendChild(cardBox);

        const cardWrapper = document.createElement('div');
        cardWrapper.classList.add('card__wrapper');
        cardBox.appendChild(cardWrapper);

        const cardPhoto = document.createElement('img');
        cardPhoto.classList.add('card__img');
        cardPhoto.setAttribute('src', './assets/photos/' + entite.photo)
        cardPhoto.setAttribute('alt', 'Photo de ' + entite.label)
        cardWrapper.appendChild(cardPhoto);

        const cardLabel = document.createElement('h3');
        cardLabel.classList.add('card__label');
        cardLabel.textContent = entite.label;
        cardWrapper.appendChild(cardLabel);


        if (entite.annee_naissance !== null) {
            var chaine = '(' + entite.annee_naissance;

            if (entite.annee_mort !== null) {
                chaine += ' - ' + entite.annee_mort; }

            const cardDate = document.createElement('span');
            cardDate.classList.add('card__date');
            cardDate.textContent = chaine + ')';
            cardLabel.appendChild(cardDate);
        }

        if (entite.titre !== null) {
            const cardTitre = document.createElement('h4');
            cardTitre.classList.add('card__titre');
            cardTitre.textContent = entite.titre;
            cardWrapper.appendChild(cardTitre);
        }

        cardBox.addEventListener('click', () => {
            cardWrapper.classList.add('active');
        });

    }
    
});
</script>

</html>