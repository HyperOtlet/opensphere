<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr" >

<head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
        <meta name="author" content="Guillaume Brioudes https://myllaume.fr/" />
            <meta name="dcterms.date" content="2021-02-26" />
            <meta name="keywords" content="développeur" />
        <title>Documentation de l’Opensphère</title>

    <link rel="stylesheet" href="style.css" />

    </head>

<body>

        
    <div class="container">

        <nav id="TOC" role="doc-toc">
    <ul>
    <li><a href="#installation"><span class="toc-section-number">1</span> Installation</a>
    <ul>
    <li><a href="#pre-requis"><span class="toc-section-number">1.1</span> Pré-requis</a></li>
    <li><a href="#telechargement"><span class="toc-section-number">1.2</span> Téléchargement</a></li>
    <li><a href="#mise-en-route"><span class="toc-section-number">1.3</span> Mise en route</a></li>
    </ul></li>
    <li><a href="#format-des-donnees"><span class="toc-section-number">2</span> Format des données</a>
    <ul>
    <li><a href="#entites"><span class="toc-section-number">2.1</span> Entités</a>
    <ul>
    <li><a href="#metadonnees-requises"><span class="toc-section-number">2.1.1</span> Métadonnées requises</a></li>
    <li><a href="#ajouter-des-metadonnees"><span class="toc-section-number">2.1.2</span> Ajouter des métadonnées</a></li>
    </ul></li>
    <li><a href="#liens"><span class="toc-section-number">2.2</span> Liens</a></li>
    <li><a href="#generer-des-donnees-au-format-requis"><span class="toc-section-number">2.3</span> Générer des données au format requis</a>
    <ul>
    <li><a href="#modele-google-sheets"><span class="toc-section-number">2.3.1</span> Modèle Google Sheets</a></li>
    <li><a href="#modele-airtable"><span class="toc-section-number">2.3.2</span> Modèle Airtable</a></li>
    </ul></li>
    </ul></li>
    <li><a href="#integration-des-donnees"><span class="toc-section-number">3</span> Intégration des données</a>
    <ul>
    <li><a href="#groupes"><span class="toc-section-number">3.1</span> Groupes</a></li>
    <li><a href="#images"><span class="toc-section-number">3.2</span> Images</a></li>
    <li><a href="#affichage-lateral"><span class="toc-section-number">3.3</span> Affichage latéral</a></li>
    <li><a href="#filtres"><span class="toc-section-number">3.4</span> Filtres</a></li>
    </ul></li>
    <li><a href="#langues"><span class="toc-section-number">4</span> Langues</a></li>
    <li><a href="#metadonnees-du-site"><span class="toc-section-number">5</span> Métadonnées du site</a></li>
    <li><a href="#environnement-de-developpement"><span class="toc-section-number">6</span> Environnement de développement</a>
    <ul>
    <li><a href="#bibliotheques"><span class="toc-section-number">6.1</span> Bibliothèques</a></li>
    <li><a href="#outil-de-developpement"><span class="toc-section-number">6.2</span> Outil de développement</a></li>
    </ul></li>
    <li><a href="#exemples-dutilisation"><span class="toc-section-number">7</span> Exemples d’utilisation</a></li>
    </ul>
    </nav>
    
    <main>
        <h1 class="title">Documentation de l’Opensphère</h1>

<p>L’Opensphère est un logiciel de cartographie relationnelle interactive conçu par l’équipe du programme de recherche ANR <a href="https://hyperotlet.hypotheses.org/">HyperOtlet</a>.</p>
<p>Les fonctionnalités du logiciel sont décrites dans le <a href="https://hyperotlet.github.io/otletosphere/">manuel d’utilisation</a> de l’Otletosphère, qui constitue l’origine du projet (voir les <a href="#">exemples d’utilisation</a> plus bas).</p>
<p>Cette documentation s’adresse aux personnes souhaitant réutiliser le code de l’Opensphère.</p>
<p>L’Opensphère a été conçue pour faciliter la réutilisation. Son fonctionnement nécessite uniquement un serveur web local ou en ligne. Le code est écrit en JavaScript mais il n’est pas nécessaire de connaître ce langage pour s’approprier le logiciel : il suffit de modifier le code aux endroits indiqués dans cette documentation pour l’adapter à ses données et métadonnées. Il est toutefois recommandé d’avoir des <a href="https://developer.mozilla.org/fr/docs/Learn/Getting_started_with_the_web/HTML_basics">notions de base en HTML</a>.</p>
<p>La documentation fournit également des ressources pour personnaliser le logiciel en profondeur aux personnes maîtrisant JavaScript.</p>
<div class="sommaire">
<ol type="1">
<li><a href="#">Installation</a></li>
<li><a href="#">Intégration des données</a></li>
<li><a href="#">Paramétrer le menu de description</a></li>
<li><a href="#">Paramétrer les filtres</a></li>
<li><a href="#">Ajouter une langue d’affichage et description</a></li>
<li><a href="#">Modifier la description du site web</a></li>
<li><a href="#">Environnement de développement</a></li>
<li><a href="">Exemples d’utilisation</a></li>
</ol>
</div>
<h1 data-number="1" id="installation"><span class="header-section-number">1</span> Installation</h1>
<h2 data-number="1.1" id="pre-requis"><span class="header-section-number">1.1</span> Pré-requis</h2>
<p>Il vous faut un serveur web pour faire fonctionner l’Opensphère. En effet, les fichiers de données ne peuvent être captés que grâce à des protocoles propres aux serveurs.</p>
<p>Pour afficher l’Opensphère en local, utilisez un logiciel comme <a href="https://www.wampserver.com/">WAMP</a> (Windows), <a href="https://www.mamp.info/fr/downloads/">MAMP</a> (Windows, macOS) ou <a href="https://www.apachefriends.org/fr/index.html">XAMP</a> (Windows, macOS, Linux).</p>
<p>Pour héberger l’Opensphère en ligne, il vous faudra un moyen de transférer les fichiers de l’Opensphère sur un serveur, par exemple avec un client FTP comme <a href="https://filezilla-project.org/">FileZilla</a> (Windows, macOS, Linux).</p>
<h2 data-number="1.2" id="telechargement"><span class="header-section-number">1.2</span> Téléchargement</h2>
<p>Le code de l’Opensphère est hébergé sur GitHub : <a href="https://github.com/hyperotlet/opensphere" class="uri">https://github.com/hyperotlet/opensphere</a>. Pour télécharger la dernière version, rendez-vous sur <a href="https://github.com/hyperotlet/opensphere/releases">la page des téléchargements</a>.</p>
<p>Vous pouvez également cloner le dépôt via un client Git, comme par exemple <a href="https://desktop.github.com/">GitHub Desktop</a> (Windows, macOS), ou via un terminal en saisissant la commande suivante :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/hyperotlet/opensphere.git</span></code></pre></div>
<h2 data-number="1.3" id="mise-en-route"><span class="header-section-number">1.3</span> Mise en route</h2>
<p>Déplacez le dossier <code>opensphere</code> dans le dossier racine de votre serveur, ou bien configurez votre serveur pour faire du dossier <code>opensphere</code> la racine.</p>
<h1 data-number="2" id="format-des-donnees"><span class="header-section-number">2</span> Format des données</h1>
<p>L’Opensphère requiert que les données décrivant les entités et leurs relations soient contenues séparément dans deux fichiers <a href="https://developer.mozilla.org/fr/docs/Learn/JavaScript/Objects/JSON">JSON</a> nommés respectivement <code>entite.json</code> et <code>lien.json</code>. Ces deux fichiers doivent être placés dans le répertoire <code>/data</code>.</p>
<h2 data-number="2.1" id="entites"><span class="header-section-number">2.1</span> Entités</h2>
<h3 data-number="2.1.1" id="metadonnees-requises"><span class="header-section-number">2.1.1</span> Métadonnées requises</h3>
<p>L’exemple ci-dessous constitue une version simplifiée du fichier <code>entite.json</code>. Il présente les métadonnées qui doivent obligatoirement être présentes pour que l’Opensphère fonctionne :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Paul Otlet&quot;</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;group&quot;</span><span class="fu">:</span> <span class="st">&quot;Personne&quot;</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Fondateur du Mundaneum&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Mundaneum&quot;</span><span class="fu">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;group&quot;</span><span class="fu">:</span> <span class="st">&quot;Institution&quot;</span><span class="fu">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Le projet phare de Paul Otlet&quot;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
<h3 data-number="2.1.2" id="ajouter-des-metadonnees"><span class="header-section-number">2.1.2</span> Ajouter des métadonnées</h3>
<p>Vous pouvez ajouter autant de métadonnées que vous le souhaitez pour chaque entité. Ceci permet notamment de décliner les informations dans plusieurs langues. <!-- ajouter: (voir [multilinguisme](#) plus bas) --></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Paul Otlet&quot;</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Personne&quot;</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Fondateur du Mundaneum&quot;</span><span class="fu">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;annee_naissance&quot;</span><span class="fu">:</span> <span class="dv">1868</span><span class="fu">,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;annee_mort&quot;</span><span class="fu">:</span> <span class="dv">1944</span><span class="fu">,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;pays&quot;</span><span class="fu">:</span> <span class="st">&quot;Belgique&quot;</span><span class="fu">,</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;pays_en&quot;</span><span class="fu">:</span> <span class="st">&quot;Belgium&quot;</span><span class="fu">,</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;domaine&quot;</span><span class="fu">:</span> <span class="st">&quot;Bibliographie&quot;</span><span class="fu">,</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;domaine_en&quot;</span><span class="fu">:</span> <span class="st">&quot;Bibliography&quot;</span><span class="fu">,</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lien_wikipedia&quot;</span><span class="fu">:</span><span class="st">&quot;https://fr.wikipedia.org/wiki/Paul_Otlet&quot;</span><span class="fu">,</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lien_wikipedia_en&quot;</span><span class="fu">:</span><span class="st">&quot;https://en.wikipedia.org/wiki/Paul_Otlet&quot;</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
<!-- Nous verrons plus tard comment [intégrer ces informations de manière systématique](#) dans l’interface. -->
<h2 data-number="2.2" id="liens"><span class="header-section-number">2.2</span> Liens</h2>
<p>L’exemple ci-dessous constitue une version simplifiée du fichier <code>lien.json</code>. Les liens reposent sur les identifiants des entités. Les liens eux-mêmes ont un identifiant distinct. Par exemple, le lien <code>1</code> relie les entités <code>1</code> et <code>2</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Paul Otlet est le fondateur du Mundaneum.&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
<h2 data-number="2.3" id="generer-des-donnees-au-format-requis"><span class="header-section-number">2.3</span> Générer des données au format requis</h2>
<p>Générer des données au format requis pour l’Opensphère nécessite de disposer d’outils permettant la saisie des données, leur mise en relation par un système d’identifiants uniques, et leur export au format JSON. Nous proposons des modèles Google Sheets et Airtable afin de faciliter ces différentes étapes.</p>
<h3 data-number="2.3.1" id="modele-google-sheets"><span class="header-section-number">2.3.1</span> Modèle Google Sheets</h3>
<p>Un modèle Google Sheets pour l’Opensphère est disponible à l’adresse suivante : <a href="https://docs.google.com/spreadsheets/d/1hiONQ5SM82vKTAzMH2NRU3nNGQMToOU-TGaTfxxT0u4/edit?usp=sharing">https://docs.google.com/spreadsheets/d/1hiONQ5SM82vKTAzMH2NRU3nNGQMToOU-TGaTfxxT0u4/edit?usp=sharing</a></p>
<p><a href="https://www.google.com/sheets/about/">Google Sheets</a> est un tableur classique, qui repose sur des formules pour contrôler la saisie des données. Notre modèle inclut des formules, notamment pour faire correspondre automatiquement les identifiants d’une feuille à l’autre. Afin de ne pas rencontrer de difficultés, n’oubliez pas d’étendre les formules sur plusieurs lignes après avoir saisi des données.</p>
<p>La saisie des données concernant les entités se fait dans la feuille « Entités ». La saisie des données concernant leurs relations se fait dans la feuille « Liens ». La feuille « Extraction » doit être remplie automatiquement grâce une formule qui remplace les noms des identités par les identifiants correspondants (grâce à la <a href="https://support.google.com/docs/answer/3093318?hl=fr">fonction <code>RECHERCHEV</code></a>. Ceci permet de saisir les relations dans une interface confortable (la feuille « Liens ») tout en exportant les données au format requis depuis une feuille ad hoc (la feuille « Extraction »).</p>
<p>Pour exporter les données au format JSON, installez l’extension <a href="https://workspace.google.com/marketplace/app/export_sheet_data/903838927001">Export Sheet Data</a> depuis l’onglet <code>Modules complémentaires</code> dans Google Sheets.</p>
<p>Une fois l’extension installée, cliquez sur <code>Modules complémentaires</code> › <code>Export Sheet Data</code> › <code>Open Sidebar</code>. Suivez les instructions détaillées dans la feuille « Notice export » et reprises ci-dessous :</p>
<!-- Inclure les instructions ici. Bien préciser quelles feuilles exporter. -->
<h3 data-number="2.3.2" id="modele-airtable"><span class="header-section-number">2.3.2</span> Modèle Airtable</h3>
<p>Un modèle Airtable pour l’Opensphère est disponible à l’adresse suivante : <a href="https://airtable.com/shrBRlWxvzFatUoFF/tblHqN5RE9z7j5HdU/viwn2Q7y4fijyAfSs">https://airtable.com/shrBRlWxvzFatUoFF/tblHqN5RE9z7j5HdU/viwn2Q7y4fijyAfSs</a></p>
<p><a href="https://airtable.com/">Airtable</a> est un logiciel qui permet d’utiliser une base de données via l’interface d’un tableur collaboratif en ligne. <a href="https://support.airtable.com/hc/en-us">Une documentation</a> est disponible en anglais. Notre modèle inclut des règles qui permettent de contrôler la saisie des données.</p>
<p>Les tables « entites » et « liens » peuvent être exportées au format CSV. Vous devrez utiliser un <a href="http://convertcsv.com/json-to-csv.htm">convertisseur CSV-JSON</a> pour obtenir les fichiers <code>entite.json</code> et <code>lien.json</code> requis.</p>
<h1 data-number="3" id="integration-des-donnees"><span class="header-section-number">3</span> Intégration des données</h1>
<p>Une fois les fichiers <code>entite.json</code> et <code>lien.json</code> placés dans le répertoire <code>/data</code>, il faut modifier le code de l’Opensphère pour qu’elle puisse lire les données.</p>
<figure>
<img src="transfert-data.svg" alt="Transfert des données" /><figcaption aria-hidden="true">Transfert des données</figcaption>
</figure>
<p>Dans le fichier <code>/assets/main.js</code>, à partir de la ligne 20, vous allez retrouver la commande d’intégration, simplifiée ci-dessous. Elle vous permet de faire correspondre vos champs (colonnes du tableur) à des constantes. Par exemple, dans cette commande, notre champ « titre » (appelé « entite.titre » dans ce contexte) est associé à la constante « title ». Ainsi, dans le contexte du logiciel, « titre » est devenu « title ». Ce sont ces constantes que vous allez pouvoir employer lors des autres étapes de la réutilisation du logiciel.</p>
<p>Avec cette configuration</p>
<ul>
<li>on fait correspondre « label », « description » et « id » à des constantes équivalentes ;</li>
<li>on traduit notre champ « titre » en constante « title » ;</li>
<li>on augmente l’âge de toutes les entités de 6 ;</li>
<li>on assigne la traduction du champ « titre » en français et en anglais.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>network<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">nodes</span><span class="op">.</span><span class="fu">add</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    entites<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(entite) {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> entiteObj <span class="op">=</span> {</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>            <span class="co">// entite metas, default langage</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">id</span><span class="op">:</span> entite<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> entite<span class="op">.</span><span class="at">label</span><span class="op">,</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>            <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">titre</span><span class="op">,</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">age</span><span class="op">:</span> <span class="bu">Number</span>(entite<span class="op">.</span><span class="at">age</span>) <span class="op">+</span> <span class="dv">6</span><span class="op">,</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> entite<span class="op">.</span><span class="at">type</span><span class="op">,</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>            <span class="dt">description</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description</span><span class="op">,</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>            <span class="dt">image</span><span class="op">:</span><span class="st">&#39;./assets/photos/&#39;</span> <span class="op">+</span> entite<span class="op">.</span><span class="at">image</span><span class="op">,</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>            <span class="co">// translated metas</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            <span class="dt">Fr</span><span class="op">:</span> {</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">titre</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>            <span class="dt">En</span><span class="op">:</span> {</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">titre_en</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span></code></pre></div>
<p>Il s’agit du même procédé quelques lignes plus bas avec les liens.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>network<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">edges</span><span class="op">.</span><span class="fu">add</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    liens<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(lien) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lienObj <span class="op">=</span> {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">id</span><span class="op">:</span> lien<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">from</span><span class="op">:</span> lien<span class="op">.</span><span class="at">from</span><span class="op">,</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>            <span class="dt">to</span><span class="op">:</span> lien<span class="op">.</span><span class="at">to</span><span class="op">,</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            <span class="dt">title</span><span class="op">:</span> lien<span class="op">.</span><span class="at">label</span><span class="op">,</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">Fr</span><span class="op">:</span> {</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                <span class="dt">title</span><span class="op">:</span> lien<span class="op">.</span><span class="at">label</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">En</span><span class="op">:</span> {</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                <span class="dt">title</span><span class="op">:</span> lien<span class="op">.</span><span class="at">label_en</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span></code></pre></div>
<h2 data-number="3.1" id="groupes"><span class="header-section-number">3.1</span> Groupes</h2>
<p>Lors de l’<a href="#">intégration</a>, toutes vos entités doivent être enregistrées avec une constante <code>group</code>. Celle-ci vous permet de styliser toutes les entités qui partagent la même valeur, par exemple <code>group: amis</code> représenté différemment de <code>group: ennemis</code>. Vous pouvez leur ajouter une couleur de contour commune, une forme ou tout autre <a href="https://visjs.github.io/vis-network/docs/network/nodes.html">caractéristique valide pour le graphe</a>.</p>
<p>Vous pouvez entrer les styles comme présentés ci-dessous dans le fichier <code>/assets/main.js</code>, vers la ligne 160.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>groups<span class="op">:</span> { <span class="co">// massive styling, by group name</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">amis</span><span class="op">:</span> {<span class="dt">shape</span><span class="op">:</span> <span class="st">&#39;circle&#39;</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> {<span class="dt">border</span><span class="op">:</span> grey}<span class="op">,</span> <span class="dt">size</span><span class="op">:</span> <span class="dv">20</span>}<span class="op">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">ennemis</span><span class="op">:</span> {<span class="dt">shape</span><span class="op">:</span> <span class="st">&#39;square&#39;</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> {<span class="dt">border</span><span class="op">:</span> <span class="fu">rgb</span>(<span class="dv">84</span><span class="op">,</span><span class="dv">84</span><span class="op">,</span><span class="dv">194</span>)}<span class="op">,</span> <span class="dt">size</span><span class="op">:</span> <span class="dv">10</span>}</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 data-number="3.2" id="images"><span class="header-section-number">3.2</span> Images</h2>
<p>Par défaut, toutes les entités doivent avoir une image, éventuellement de remplacement. Le nom complet de l’image (nom et extension, tel que <code>nom_image.jpg</code>, ou <code>nom_image.png</code>) doit apparaître dans une constante tel que <code>image:'./assets/photos/' + nom_image</code>. Les images doivent être placées dans le répertoire <code>/assets/photos</code> d’après l’instruction précédente.</p>
<p>Si vous souhaitez ne plus afficher d’images dans le graphe et le panneau de description, veuillez suivre les étapes suivantes :</p>
<ul>
<li>dans <code>/assets/main.js</code>, ligne ~30
<ul>
<li>retirer le champ « image » de la <a href="#">commande d’intégration</a></li>
</ul></li>
<li>dans <code>/assets/main.js</code>, ligne ~150
<ul>
<li>modifier le champ <code>shape:'image'</code> avec la valeur <code>circle</code>, <code>square</code> ou <a href="https://visjs.github.io/vis-network/docs/network/nodes.html">autre forme valide</a></li>
<li>modifier les champs de <code>groups</code> en retirant les valeurs <code>shape:'circularImage'</code></li>
</ul></li>
</ul>
<h2 data-number="3.3" id="affichage-lateral"><span class="header-section-number">3.3</span> Affichage latéral</h2>
<p>L’Opensphère permet d’afficher les informations sur chaque entité dans un panneau latéral situé à droite de l’interface. Pour chaque entité inscrite dans la base de données <code>entite.json</code> (et figurant par conséquent dans le graphe), il est possible d’afficher son <code>label</code>, son <code>title</code> (l’information <code>titre</code> ayant été réaffectée au terme <code>title</code> dans <a href="#">notre exemple</a>) ou tout autre information qui a été <a href="#">intégrée dans la configuration</a>.</p>
<p>Ces informations apparaissent dans des champs que vous allez pouvoir définir et placer. Lorsqu’une entité est sélectionnée (via le graphe, l’index, le moteur de recherche ou ce même volet), l’ensemble de ces champs sont complétés avec les informations à disposition pour l’entité depuis la base de données.</p>
<p>Dans le fichier <code>index.html</code>, vous retrouverez une marque <code>LATERAL FICHE</code>, peu après la ligne 250. S’en suit le code intégrant le volet <code>&lt;aside&gt;</code> et la boîte identifiée <code>fiche-content</code>. En son sein, vous pouvez modifier tout les éléments relatifs à cet affichage.</p>
<p>Vous pouvez ajouter tout élément pouvant contenir du texte dans comme les balises <code>&lt;span&gt;</code> et <code>&lt;div&gt;</code> et les marquer avec l’attribut <code>data-meta</code>. C’est lui qui va permettre d’insérer comme texte dans l’élément que vous avez défini l’information passée en paramètre. Par exemple, les balises ci-dessous permet d’afficher les informations liées au constantes « title » et « description » de l’entité active.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;aside</span><span class="ot"> id=</span><span class="st">&quot;fiche&quot;</span><span class="kw">&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    …</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;main</span><span class="ot"> id=</span><span class="st">&quot;fiche-content&quot;</span><span class="kw">&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        …</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;span</span><span class="ot"> data-meta=</span><span class="st">&quot;title&quot;</span><span class="kw">&gt;&lt;/span&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;div</span><span class="ot"> data-meta=</span><span class="st">&quot;description&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/main&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/aside&gt;</span></span></code></pre></div>
<h2 data-number="3.4" id="filtres"><span class="header-section-number">3.4</span> Filtres</h2>
<p>Les filtres sont des leviers « on/off ». Affichés sous forme de boutons en entête du site et dans le volet de filtre (affiché sur les petits écrans de tablette), ils permettent d’afficher ou de cacher les entités correspondant à certains critères. Ces critères sont renseignés dans ces mêmes boutons portant la classe <code>btn-group</code>. Il peuvent être modifiés dans le fichier <code>index.html</code>.</p>
<p>La valeur de l’attribut <code>data-type</code> correspond à la constante qui va être analysée. La valeur de l’attribut <code>data-meta</code> correspond à la valeur attendue de cette constante. Avec les boutons ci-dessous, il est possible respectivement d’afficher/cacher les entités pour lesquelles la constante « genre » a la valeur « homme » et la constante « group » a la valeur « institution ».</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;button</span><span class="ot"> class=</span><span class="st">&quot;btn-group&quot;</span><span class="ot"> data-type=</span><span class="st">&quot;genre&quot;</span><span class="ot"> data-meta=</span><span class="st">&quot;homme&quot;</span><span class="kw">&gt;</span>homme<span class="kw">&lt;/button&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;button</span><span class="ot"> class=</span><span class="st">&quot;btn-group&quot;</span><span class="ot"> data-type=</span><span class="st">&quot;group&quot;</span><span class="ot"> data-meta=</span><span class="st">&quot;institution&quot;</span><span class="kw">&gt;</span>institution<span class="kw">&lt;/button&gt;</span></span></code></pre></div>
<p>Pensez à modifier en miroir le volet de filtre <code>&lt;aside id="filter-volet"&gt;</code>, vers la ligne 230 de <code>index.html</code>.</p>
<h1 data-number="4" id="langues"><span class="header-section-number">4</span> Langues</h1>
<p>Dans l’entête de la page vous trouverez les boutons de traduction du site. Il se trouvent dans la boite portant la classe <code>lang-box</code>, vers la ligne 150 de <code>index.html</code>. Vous pouvez ajouter une langue très facilement, comme pour le Russe avec l’exemple ci-dessous.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span><span class="ot"> data-lang=</span><span class="st">&quot;Ru&quot;</span><span class="kw">&gt;</span>RU<span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>Une fois le bouton disposé, vous pouvez intégrer les traductions</p>
<ul>
<li><strong>au site web</strong> : en déposant des attributs <code>data-lang-ru</code> sur les balises contenant du texte (voir exemple ci-dessous) ;</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span><span class="ot"> data-lang-ru=</span><span class="st">&quot;traduction en russe&quot;</span><span class="kw">&gt;</span>texte d’origine<span class="kw">&lt;/p&gt;</span></span></code></pre></div>
<ul>
<li><strong>à la base de données</strong> : en ajoutant des informations propre à la langue lors de l’<a href="#">intégration de la configuration</a> comme ci-dessous.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">// entite metas, default langage</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="dt">titre</span><span class="op">:</span> entite<span class="op">.</span><span class="at">titre</span><span class="op">,</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="dt">description</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description</span><span class="op">,</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">// translated metas</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="dt">Fr</span><span class="op">:</span> {</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">titre</span><span class="op">,</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">description</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="dt">En</span><span class="op">:</span> {</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">titre_en</span><span class="op">,</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">description</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description_en</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="dt">Ru</span><span class="op">:</span> {</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">titre_ru</span><span class="op">,</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">description</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description_ru</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h1 data-number="5" id="metadonnees-du-site"><span class="header-section-number">5</span> Métadonnées du site</h1>
<p>Les métadonnées sont les informations sur votre création récoltées par les robots qui parcourent le Web. Il s’agit du titre et de la description affichés par les moteurs de recherches. D’autres informations comme la liste des auteurs, la date de mise en ligne peuvent également être captée par des logiciels d’enregistrement comme Zotero. Pour le <strong>référencement de votre projet</strong>, il est primordial que vous complétiez ces champs.</p>
<p>Dans le fichier <code>index.html</code>, entre les lignes 15 et 97, vous êtes invités à saisir de nombreuses informations pour les attributs <code>content</code> et <code>href</code>. Nous avons laissé un texte par défaut ou bien des champs vides tels que <code>content="  "</code>.</p>
<h1 data-number="6" id="environnement-de-developpement"><span class="header-section-number">6</span> Environnement de développement</h1>
<h2 data-number="6.1" id="bibliotheques"><span class="header-section-number">6.1</span> Bibliothèques</h2>
<p>Pour améliorer la maintenabilité et la lisibilité du code source, l’équipe de développement a recouru aux bibliothèques suivantes. Elles sont été intégrées directement au code source de l’Opensphère et ne nécessitent par conséquent aucun téléchargement.</p>
<ul>
<li><strong><a href="https://github.com/visjs/vis-network">Vis.js</a> v7.10.2 (Apache License 2.0)</strong> : réalisation la visualisation (graphe) ainsi que du système de circulation des données grâce à ses deux composants <em>Network</em> et <em>DataSet</em>.</li>
<li><strong><a href="https://github.com/krisk/Fuse/">Fuse.js</a> v6.4.1 (Apache License 2.0)</strong> : mise en place du moteur de recherche.</li>
<li><strong><a href="https://github.com/twbs/bootstrap">Bootstrap Grid</a> v4.5.0 (MIT License)</strong> : flexibilité de l’interface pour tablettes.</li>
</ul>
<h2 data-number="6.2" id="outil-de-developpement"><span class="header-section-number">6.2</span> Outil de développement</h2>
<p>Nous avons fait le choix de l’outil <a href="https://gulpjs.com/">GulpJs</a> pour aider au développement de l’Opensphère. Il nous permet de transpiler les fichiers JavaScript contenus dans le répertoire <code>/dist</code> en <code>main.js</code>. Ainsi, on compense la complexité du projet (un millier de ligne de JavaScript), la variété des modules (une dizaine d’objets), en la répartissant dans quelques fichiers d’une centaine de lignes.</p>
<p>Une fois GulpJs lancé, il suffit de modifier l’un des fichiers du répertoire <code>/dist</code> pour que les modifications soient répercutées au niveau global (dans le répertoire <code>/assets</code>). Au début de chaque fichier, vous pourrez trouver une description de son contenu et d’autres commentaires sur le code source.</p>
<p>Pour utiliser Gulp, veuillez suivre les <a href="https://gulpjs.com/docs/en/getting-started/quick-start">consignes d’installation</a>, puis exécuter successivement les commandes suivantes dans votre terminal. L’ensemble des instructions sont commentées dans le fichier <code>gulpfile.js</code>.</p>
<pre><code>npm i
gulp watch</code></pre>
<h1 data-number="7" id="exemples-dutilisation"><span class="header-section-number">7</span> Exemples d’utilisation</h1>
<p>Les projets suivants ont été réalisés à l’aide du logiciel Opensphère. Ils peuvent vous servir d’exemple, d’inspiration pour réaliser votre propre réutilisation.</p>
<ul>
<li><strong>Otletosphère</strong> : réalisée par l’équipe du programme de recherche ANR <a href="https://hyperotlet.hypotheses.org/">HyperOtlet</a> autour de Paul Otlet.
<ul>
<li>site : <a href="http://hyperotlet.huma-num.fr/otletosphere/">http://hyperotlet.huma-num.fr/otletosphere/</a></li>
<li>code source : <a href="https://github.com/hyperotlet/otletosphere">https://github.com/hyperotlet/otletosphere</a></li>
</ul></li>
<li><strong>OpenDataSphère</strong> : réalisée par les étudiantes et étudiants de la <a href="http://www.infonumbordeaux.fr/mind/">licence professionnelle MIND</a> pour traiter de l’open data en France.
<ul>
<li>site : <a href="http://hyperotlet.huma-num.fr/opendatasphere/">http://hyperotlet.huma-num.fr/opendatasphere/</a></li>
<li>code source : <a href="https://github.com/hyperotlet/opendatasphere">https://github.com/hyperotlet/opendatasphere</a></li>
</ul></li>
</ul>
    </main>

    
        
    </div>

</body>

</html>